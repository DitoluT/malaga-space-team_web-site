import{c as d,r as l,j as e,G as b,A as $,e as le,a as w,X as H,M as ne,U as ie,d as oe,b as ce,C as de,g as he,R as xe}from"./index-DPLhRJCy.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=d("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=d("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=d("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=d("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=d("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=d("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=d("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=d("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=d("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),k="",j={login:`${k}/api/inventory/login`,logout:`${k}/api/inventory/logout`,verify:`${k}/api/inventory/verify`,items:`${k}/api/inventory/items`,stats:`${k}/api/inventory/stats`,itemById:t=>`${k}/api/inventory/items/${t}`},je=({onLoginSuccess:t})=>{const[c,o]=l.useState(""),[n,h]=l.useState(""),[m,a]=l.useState(""),[i,x]=l.useState(!1),N=async u=>{u.preventDefault(),a(""),x(!0);try{const p=await fetch(j.login,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:c,password:n})}),C=await p.json();p.ok&&C.success?t(C.user):a(C.error||"Error al iniciar sesión")}catch(p){console.error("Error de conexión:",p),a("Error de conexión con el servidor. Asegúrate de que el servidor esté ejecutándose.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),e.jsx(b,{className:"w-full max-w-md relative z-10",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-500/20 to-purple-500/20 border-2 border-white/30 rounded-full flex items-center justify-center backdrop-blur-sm shadow-lg mb-4",children:e.jsx(R,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Sistema de Inventario"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Málaga Space Team"})]}),m&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-start space-x-3",children:[e.jsx($,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-200 text-sm",children:m})]}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-white/90 text-sm font-medium mb-2",children:"Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{id:"username",type:"text",value:c,onChange:u=>o(u.target.value),className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all",placeholder:"Ingresa tu usuario",required:!0,disabled:i})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-white/90 text-sm font-medium mb-2",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{id:"password",type:"password",value:n,onChange:u=>h(u.target.value),className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all",placeholder:"Ingresa tu contraseña",required:!0,disabled:i})]})]}),e.jsx(w,{type:"submit",variant:"primary",size:"lg",className:"w-full",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-5 h-5 mr-2 animate-spin"}),"Iniciando sesión..."]}):"Iniciar Sesión"})]})]})})]})},we=({item:t,onSave:c,onClose:o})=>{const[n,h]=l.useState({nombre:"",numero_serie:"",descripcion:"",categoria:"",ubicacion:"",responsable:"",cantidad:1,estado:"Disponible",notas:""});l.useEffect(()=>{t&&h({nombre:t.nombre||"",numero_serie:t.numero_serie||"",descripcion:t.descripcion||"",categoria:t.categoria||"",ubicacion:t.ubicacion||"",responsable:t.responsable||"",cantidad:t.cantidad||1,estado:t.estado||"Disponible",notas:t.notas||""})},[t]);const m=i=>{i.preventDefault(),c(n)},a=i=>{const{name:x,value:N}=i.target;h(u=>({...u,[x]:N}))};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx(b,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 border border-blue-500/30 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Editar Item":"Nuevo Item"}),e.jsx("p",{className:"text-white/60 text-sm",children:t?"Modifica la información del item":"Añade un nuevo item al inventario"})]})]}),e.jsx("button",{onClick:o,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(H,{className:"w-5 h-5 text-white/90"})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4 max-h-[calc(90vh-200px)] overflow-y-auto pr-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white/90 text-sm font-medium mb-2",children:["Nombre ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:a,required:!0,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50",placeholder:"Ej: Arduino Uno"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Número de Serie"}),e.jsx("input",{type:"text",name:"numero_serie",value:n.numero_serie,onChange:a,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50",placeholder:"Ej: SN12345678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Descripción"}),e.jsx("textarea",{name:"descripcion",value:n.descripcion,onChange:a,rows:2,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50 resize-none",placeholder:"Breve descripción del item..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Categoría"}),e.jsx("input",{type:"text",name:"categoria",value:n.categoria,onChange:a,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50",placeholder:"Ej: Electrónica",list:"categorias"}),e.jsxs("datalist",{id:"categorias",children:[e.jsx("option",{value:"Electrónica"}),e.jsx("option",{value:"Mecánica"}),e.jsx("option",{value:"Software"}),e.jsx("option",{value:"Herramientas"}),e.jsx("option",{value:"Materiales"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Estado"}),e.jsxs("select",{name:"estado",value:n.estado,onChange:a,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400/50",children:[e.jsx("option",{value:"Disponible",children:"Disponible"}),e.jsx("option",{value:"En uso",children:"En uso"}),e.jsx("option",{value:"Mantenimiento",children:"Mantenimiento"}),e.jsx("option",{value:"Dañado",children:"Dañado"}),e.jsx("option",{value:"Prestado",children:"Prestado"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Ubicación"}),e.jsx("input",{type:"text",name:"ubicacion",value:n.ubicacion,onChange:a,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50",placeholder:"Ej: Lab A, Estante 3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Responsable"}),e.jsx("input",{type:"text",name:"responsable",value:n.responsable,onChange:a,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50",placeholder:"Nombre de la persona"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Cantidad"}),e.jsx("input",{type:"number",name:"cantidad",value:n.cantidad,onChange:a,min:"1",className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Notas"}),e.jsx("textarea",{name:"notas",value:n.notas,onChange:a,rows:3,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50 resize-none",placeholder:"Información adicional..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-white/10",children:[e.jsx(w,{type:"button",variant:"secondary",size:"md",onClick:o,children:"Cancelar"}),e.jsxs(w,{type:"submit",variant:"primary",size:"md",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),t?"Guardar Cambios":"Crear Item"]})]})]})]})})})},ge=({itemName:t,onConfirm:c,onClose:o})=>e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx(b,{className:"w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/20 border border-red-500/30 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(me,{className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Confirmar Eliminación"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Esta acción no se puede deshacer"})]})]}),e.jsx("button",{onClick:o,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(H,{className:"w-5 h-5 text-white/90"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:[e.jsx("p",{className:"text-white/90 mb-2",children:"¿Estás seguro de que deseas eliminar el siguiente item?"}),e.jsxs("p",{className:"text-white font-semibold text-lg",children:['"',t,'"']})]}),e.jsx("p",{className:"text-white/70 text-sm mt-4",children:"El item será eliminado permanentemente del inventario. Esta acción solo está disponible para administradores."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(w,{variant:"secondary",size:"md",onClick:o,children:"Cancelar"}),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-red-500/80 hover:bg-red-500 text-white font-semibold rounded-lg transition-all flex items-center space-x-2 border border-red-400/30",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"Eliminar"})]})]})]})})}),ve=({user:t,onLogout:c})=>{const[o,n]=l.useState([]),[h,m]=l.useState([]),[a,i]=l.useState(""),[x,N]=l.useState(!0),[u,p]=l.useState(!1),[C,M]=l.useState(!1),[f,L]=l.useState(null),[S,J]=l.useState(null),[g,B]=l.useState(""),[v,U]=l.useState(""),E=async()=>{N(!0);try{const r=await(await fetch(j.items,{credentials:"include"})).json();r.success&&(n(r.items),m(r.items))}catch(s){console.error("Error al cargar items:",s)}finally{N(!1)}},D=async()=>{try{const r=await(await fetch(j.stats,{credentials:"include"})).json();r.success&&J(r.stats)}catch(s){console.error("Error al cargar estadísticas:",s)}};l.useEffect(()=>{E(),D()},[]),l.useEffect(()=>{let s=o;if(a){const r=a.toLowerCase();s=s.filter(y=>{var P,T,q,_;return y.nombre.toLowerCase().includes(r)||((P=y.numero_serie)==null?void 0:P.toLowerCase().includes(r))||((T=y.descripcion)==null?void 0:T.toLowerCase().includes(r))||((q=y.ubicacion)==null?void 0:q.toLowerCase().includes(r))||((_=y.responsable)==null?void 0:_.toLowerCase().includes(r))})}g&&(s=s.filter(r=>r.categoria===g)),v&&(s=s.filter(r=>r.estado===v)),m(s)},[a,o,g,v]);const X=async()=>{try{await fetch(j.logout,{method:"POST",credentials:"include"}),c()}catch(s){console.error("Error al cerrar sesión:",s)}},O=()=>{L(null),p(!0)},K=s=>{L(s),p(!0)},Q=s=>{L(s),M(!0)},W=async s=>{try{const r=f?j.itemById(f.id):j.items;(await(await fetch(r,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)})).json()).success&&(p(!1),E(),D())}catch(r){console.error("Error al guardar item:",r)}},Y=async()=>{if(f)try{(await(await fetch(j.itemById(f.id),{method:"DELETE",credentials:"include"})).json()).success&&(M(!1),E(),D())}catch(s){console.error("Error al eliminar item:",s)}},ee=s=>{switch(s){case"Disponible":return e.jsx(de,{className:"w-4 h-4 text-green-400"});case"En uso":return e.jsx(ce,{className:"w-4 h-4 text-blue-400"});case"Mantenimiento":return e.jsx($,{className:"w-4 h-4 text-yellow-400"});case"Dañado":return e.jsx(oe,{className:"w-4 h-4 text-red-400"});default:return e.jsx(I,{className:"w-4 h-4 text-gray-400"})}},se=s=>{switch(s){case"admin":return"bg-purple-500/20 text-purple-300 border-purple-500/30";case"manager":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"viewer":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}},z=t.rol==="manager"||t.rol==="admin",te=t.rol==="admin",ae=[...new Set(o.map(s=>s.categoria).filter(Boolean))],re=[...new Set(o.map(s=>s.estado))];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-4 md:p-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[e.jsx(b,{className:"mb-6",children:e.jsxs("div",{className:"p-6 flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sistema de Inventario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-white/70",children:["Bienvenido, ",e.jsx("span",{className:"font-semibold text-white",children:t.nombre_completo})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${se(t.rol)}`,children:t.rol.toUpperCase()})]})]}),e.jsxs(w,{variant:"secondary",size:"md",onClick:X,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Cerrar Sesión"]})]})}),S&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(b,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(I,{className:"w-8 h-8 text-blue-400"}),e.jsx(A,{className:"w-5 h-5 text-white/40"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:S.totalItems}),e.jsx("div",{className:"text-white/60 text-sm",children:"Total Items"})]})}),e.jsx(b,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ne,{className:"w-8 h-8 text-purple-400"}),e.jsx(A,{className:"w-5 h-5 text-white/40"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:S.byLocation.length}),e.jsx("div",{className:"text-white/60 text-sm",children:"Ubicaciones"})]})}),e.jsx(b,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ie,{className:"w-8 h-8 text-orange-400"}),e.jsx(A,{className:"w-5 h-5 text-white/40"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:S.byCategory.length}),e.jsx("div",{className:"text-white/60 text-sm",children:"Categorías"})]})})]}),e.jsx(b,{className:"mb-6",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(fe,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",value:a,onChange:s=>i(s.target.value),placeholder:"Buscar por nombre, número de serie, ubicación, responsable...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"flex gap-2",children:[z&&e.jsxs(w,{variant:"primary",size:"md",onClick:O,children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Nuevo Item"]}),e.jsx(w,{variant:"secondary",size:"md",onClick:E,children:e.jsx(F,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:g,onChange:s=>B(s.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50",children:[e.jsx("option",{value:"",children:"Todas las categorías"}),ae.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:v,onChange:s=>U(s.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50",children:[e.jsx("option",{value:"",children:"Todos los estados"}),re.map(s=>e.jsx("option",{value:s,children:s},s))]}),(g||v)&&e.jsx("button",{onClick:()=>{B(""),U("")},className:"px-4 py-2 text-white/70 hover:text-white text-sm transition-colors",children:"Limpiar filtros"})]})]})}),e.jsx(b,{children:e.jsx("div",{className:"overflow-x-auto",children:x?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(F,{className:"w-8 h-8 text-white/40 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Cargando inventario..."})]}):h.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(I,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60 mb-2",children:a||g||v?"No se encontraron items con los filtros aplicados":"No hay items en el inventario"}),z&&!a&&!g&&!v&&e.jsxs(w,{variant:"primary",size:"sm",onClick:O,className:"mt-4",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Añadir Primer Item"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left p-4 text-white/80 font-semibold text-sm",children:"Nombre"}),e.jsx("th",{className:"text-left p-4 text-white/80 font-semibold text-sm",children:"Nº Serie"}),e.jsx("th",{className:"text-left p-4 text-white/80 font-semibold text-sm",children:"Categoría"}),e.jsx("th",{className:"text-left p-4 text-white/80 font-semibold text-sm",children:"Ubicación"}),e.jsx("th",{className:"text-left p-4 text-white/80 font-semibold text-sm",children:"Responsable"}),e.jsx("th",{className:"text-left p-4 text-white/80 font-semibold text-sm",children:"Cantidad"}),e.jsx("th",{className:"text-left p-4 text-white/80 font-semibold text-sm",children:"Estado"}),e.jsx("th",{className:"text-right p-4 text-white/80 font-semibold text-sm",children:"Acciones"})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-white",children:s.nombre}),s.descripcion&&e.jsx("div",{className:"text-xs text-white/60 mt-1",children:s.descripcion})]}),e.jsx("td",{className:"p-4 text-white/70 text-sm",children:s.numero_serie||"-"}),e.jsx("td",{className:"p-4",children:s.categoria&&e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 text-xs rounded-full",children:s.categoria})}),e.jsx("td",{className:"p-4 text-white/70 text-sm",children:s.ubicacion||"-"}),e.jsx("td",{className:"p-4 text-white/70 text-sm",children:s.responsable||"-"}),e.jsx("td",{className:"p-4 text-white/70 text-sm text-center",children:s.cantidad}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[ee(s.estado),e.jsx("span",{className:"text-white/70 text-sm",children:s.estado})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[z&&e.jsx("button",{onClick:()=>K(s),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Editar",children:e.jsx(pe,{className:"w-4 h-4 text-blue-400"})}),te&&e.jsx("button",{onClick:()=>Q(s),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(Z,{className:"w-4 h-4 text-red-400"})})]})})]},s.id))})]})})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-white/40 text-sm",children:["Mostrando ",h.length," de ",o.length," items"]})})]}),u&&e.jsx(we,{item:f,onSave:W,onClose:()=>p(!1)}),C&&f&&e.jsx(ge,{itemName:f.nombre,onConfirm:Y,onClose:()=>M(!1)})]})},Ne=()=>{const[t,c]=l.useState(null),[o,n]=l.useState(!0);l.useEffect(()=>{h()},[]);const h=async()=>{try{const i=await fetch(j.verify,{credentials:"include"});if(i.ok){const x=await i.json();x.success&&x.user&&c(x.user)}}catch(i){console.error("Error al verificar sesión:",i)}finally{n(!1)}},m=i=>{c(i)},a=()=>{c(null)};return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"w-12 h-12 text-white/40 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Verificando sesión..."})]})}):e.jsx(e.Fragment,{children:t?e.jsx(ve,{user:t,onLogout:a}):e.jsx(je,{onLoginSuccess:m})})};he.createRoot(document.getElementById("root")).render(e.jsx(xe.StrictMode,{children:e.jsx(Ne,{})}));
