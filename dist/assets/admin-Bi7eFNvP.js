import{c as _,j as e,f as S,C as B,e as H,a as y,r as i,X as W,U as L,G as X,A as p,b as Z,h as K,R as Q}from"./index-BdA2BdX0.js";import{T,b as I,c as z,R as Y,P as U,a as P,S as ee,I as te,L as se}from"./InventoryLogin-D7n5tOcZ.js";import{M as ae,E as le,L as re,B as ie}from"./mail-CYrn6fPZ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=_("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=_("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=_("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=_("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=_("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ce=({users:n,loading:c,onDelete:h,currentUserId:x})=>{if(c)return e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-white/20 border-t-white/80 rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Cargando usuarios..."})]});if(n.length===0)return e.jsxs("div",{className:"text-center py-10 bg-white/5 rounded-lg border border-white/10",children:[e.jsx(S,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"No hay usuarios registrados."})]});const f=r=>{switch(r){case"admin":return e.jsxs("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-200 rounded-full text-xs font-medium border border-purple-500/30 flex items-center w-fit",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Admin"]});case"manager":return e.jsxs("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-200 rounded-full text-xs font-medium border border-blue-500/30 flex items-center w-fit",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"Manager"]});default:return e.jsxs("span",{className:"px-2 py-1 bg-slate-500/20 text-slate-200 rounded-full text-xs font-medium border border-slate-500/30 flex items-center w-fit",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"Viewer"]})}};return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-4 px-4 text-white/60 font-medium text-sm",children:"Usuario"}),e.jsx("th",{className:"text-left py-4 px-4 text-white/60 font-medium text-sm",children:"Rol"}),e.jsx("th",{className:"text-left py-4 px-4 text-white/60 font-medium text-sm",children:"Email"}),e.jsx("th",{className:"text-left py-4 px-4 text-white/60 font-medium text-sm",children:"Estado"}),e.jsx("th",{className:"text-left py-4 px-4 text-white/60 font-medium text-sm",children:"Último Acceso"}),e.jsx("th",{className:"text-right py-4 px-4 text-white/60 font-medium text-sm",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:n.map(r=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs mr-3",children:r.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:r.nombre_completo}),e.jsxs("div",{className:"text-white/40 text-xs",children:["@",r.username]})]})]})}),e.jsx("td",{className:"py-4 px-4",children:f(r.rol)}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-white/70 text-sm",children:r.email||"-"})}),e.jsx("td",{className:"py-4 px-4",children:r.activo?e.jsxs("div",{className:"flex items-center text-green-400 text-sm",children:[e.jsx(B,{className:"w-4 h-4 mr-1.5"}),"Activo"]}):e.jsxs("div",{className:"flex items-center text-red-400 text-sm",children:[e.jsx(H,{className:"w-4 h-4 mr-1.5"}),"Inactivo"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-white/70 text-sm",children:r.ultimo_acceso?new Date(r.ultimo_acceso).toLocaleDateString():"Nunca"})}),e.jsx("td",{className:"py-4 px-4 text-right",children:r.id!==x&&e.jsx(y,{variant:"danger",size:"sm",icon:T,onClick:()=>h(r.id),title:"Eliminar usuario",children:"Eliminar"})})]},r.id))})]})})},de=({onClose:n,onAdd:c})=>{const[h,x]=i.useState({username:"",password:"",nombre_completo:"",email:"",rol:"viewer"}),[f,r]=i.useState(!1),[m,g]=i.useState(""),l=async s=>{s.preventDefault(),r(!0),g("");try{await c(h),n()}catch(u){g(u.message||"Error al crear usuario")}finally{r(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"relative w-full max-w-md bg-slate-900/90 border border-white/10 rounded-xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-white/5",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Añadir Nuevo Usuario"}),e.jsx("button",{onClick:n,className:"text-white/40 hover:text-white transition-colors",children:e.jsx(W,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[m&&e.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-200 text-sm",children:m}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Usuario *"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-2.5 w-5 h-5 text-white/30"}),e.jsx("input",{type:"text",required:!0,value:h.username,onChange:s=>x({...h,username:s.target.value}),className:"w-full pl-10 pr-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:border-blue-500 focus:outline-none",placeholder:"jdoe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Contraseña *"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-2.5 w-5 h-5 text-white/30"}),e.jsx("input",{type:"password",required:!0,value:h.password,onChange:s=>x({...h,password:s.target.value}),className:"w-full pl-10 pr-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:border-blue-500 focus:outline-none",placeholder:"••••••"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Nombre Completo *"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-2.5 w-5 h-5 text-white/30"}),e.jsx("input",{type:"text",required:!0,value:h.nombre_completo,onChange:s=>x({...h,nombre_completo:s.target.value}),className:"w-full pl-10 pr-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:border-blue-500 focus:outline-none",placeholder:"John Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-2.5 w-5 h-5 text-white/30"}),e.jsx("input",{type:"email",value:h.email,onChange:s=>x({...h,email:s.target.value}),className:"w-full pl-10 pr-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:border-blue-500 focus:outline-none",placeholder:"john@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Rol *"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-2.5 w-5 h-5 text-white/30"}),e.jsxs("select",{value:h.rol,onChange:s=>x({...h,rol:s.target.value}),className:"w-full pl-10 pr-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:border-blue-500 focus:outline-none appearance-none",children:[e.jsx("option",{value:"viewer",children:"Viewer (Solo lectura)"}),e.jsx("option",{value:"manager",children:"Manager (Editar inventario)"}),e.jsx("option",{value:"admin",children:"Admin (Gestión total)"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-white/60 hover:text-white transition-colors",children:"Cancelar"}),e.jsx(y,{type:"submit",variant:"primary",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar Usuario"})]})]})]})})},he=({currentUser:n})=>{const[c,h]=i.useState([]),[x,f]=i.useState(!0),[r,m]=i.useState(!1),[g,l]=i.useState(""),s=async()=>{f(!0);try{const b=await(await fetch(p.users,{credentials:"include"})).json();b.success?h(b.users):l("Error al cargar usuarios")}catch(o){console.error(o),l("Error de conexión")}finally{f(!1)}};i.useEffect(()=>{s()},[]);const u=async o=>{const N=await(await fetch(p.users,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)})).json();if(!N.success)throw new Error(N.error||"Error al crear usuario");await s()},j=async o=>{if(window.confirm("¿Estás seguro de eliminar este usuario?"))try{const N=await(await fetch(`${p.users}/${o}`,{method:"DELETE",credentials:"include"})).json();N.success?await s():alert(N.error||"Error al eliminar usuario")}catch(b){console.error(b),alert("Error de conexión")}};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center",children:[e.jsx(L,{className:"w-8 h-8 mr-3 text-blue-400"}),"Gestión de Usuarios"]}),e.jsx("p",{className:"text-white/60 mt-1",children:"Administra los accesos y permisos del sistema."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{variant:"secondary",icon:Y,onClick:s,title:"Recargar lista",children:"Actualizar"}),e.jsx(y,{variant:"primary",icon:U,onClick:()=>m(!0),children:"Añadir Usuario"})]})]}),e.jsx(X,{className:"p-0 overflow-hidden",children:e.jsx(ce,{users:c,loading:x,onDelete:j,currentUserId:n.id})}),r&&e.jsx(de,{onClose:()=>m(!1),onAdd:u})]})},ue=()=>{const[n,c]=i.useState([]),[h,x]=i.useState(!0),[f,r]=i.useState(!1),[m,g]=i.useState(null),[l,s]=i.useState({name:"",logo_url:"",url:""}),u=async()=>{x(!0);try{const d=await(await fetch(`${p.webPartners}/all`,{credentials:"include"})).json();d.success&&c(d.data)}catch(t){console.error(t)}finally{x(!1)}};i.useEffect(()=>{u()},[]);const j=async t=>{t.preventDefault();const d=m?`${p.webPartners}/${m.id}`:p.webPartners,w=m?"PUT":"POST";try{await fetch(d,{method:w,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}),r(!1),g(null),s({name:"",logo_url:"",url:""}),u()}catch(C){console.error(C),alert("Error al guardar")}},o=async t=>{if(window.confirm("¿Eliminar colaborador?"))try{await fetch(`${p.webPartners}/${t}`,{method:"DELETE",credentials:"include"}),u()}catch(d){console.error(d)}},b=t=>{g(t),s({name:t.name,logo_url:t.logo_url||"",url:t.url||""}),r(!0)},N=()=>{g(null),s({name:"",logo_url:"",url:""}),r(!0)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h3",{className:"text-xl text-white font-semibold",children:"Colaboradores"}),e.jsx(y,{variant:"primary",icon:U,onClick:N,children:"Añadir Colaborador"})]}),h?e.jsx("div",{className:"text-center text-white/60",children:"Cargando..."}):n.length===0?e.jsx("div",{className:"text-center text-white/40 p-8 border border-white/10 rounded-lg",children:"No hay colaboradores registrados."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(t=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 flex flex-col hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"aspect-video bg-black/20 rounded-md mb-3 flex items-center justify-center overflow-hidden p-2",children:t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.name,className:"max-h-full max-w-full object-contain"}):e.jsx("span",{className:"text-white/20",children:"No Logo"})}),e.jsx("h4",{className:"text-white font-bold mb-1",children:t.name}),e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 text-xs flex items-center mb-4 hover:underline truncate",children:[t.url," ",e.jsx(le,{className:"w-3 h-3 ml-1 flex-shrink-0"})]}),e.jsxs("div",{className:"mt-auto flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>b(t),className:"p-2 bg-white/10 rounded hover:bg-white/20 text-white transition-colors",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(t.id),className:"p-2 bg-red-500/10 rounded hover:bg-red-500/20 text-red-400 transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]})]},t.id))}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("form",{onSubmit:j,className:"bg-slate-900 border border-white/20 p-6 rounded-xl w-full max-w-md shadow-2xl",children:[e.jsxs("h3",{className:"text-xl text-white font-bold mb-6",children:[m?"Editar":"Añadir"," Colaborador"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Nombre *"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.name,onChange:t=>s({...l,name:t.target.value}),required:!0,placeholder:"Nombre de la organización"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Logo URL"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.logo_url,onChange:t=>s({...l,logo_url:t.target.value}),placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Website URL"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.url,onChange:t=>s({...l,url:t.target.value}),placeholder:"https://..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-white/60 hover:text-white transition-colors",children:"Cancelar"}),e.jsx(y,{type:"submit",variant:"primary",children:"Guardar"})]})]})})]})},xe=()=>{const[n,c]=i.useState([]),[h,x]=i.useState(!0),[f,r]=i.useState(!1),[m,g]=i.useState(null),[l,s]=i.useState({year:"",title:"",description:""}),u=async()=>{x(!0);try{const d=await(await fetch(`${p.webTimeline}/all`,{credentials:"include"})).json();d.success&&c(d.data)}catch(t){console.error(t)}finally{x(!1)}};i.useEffect(()=>{u()},[]);const j=async t=>{t.preventDefault();const d=m?`${p.webTimeline}/${m.id}`:p.webTimeline,w=m?"PUT":"POST";try{await fetch(d,{method:w,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}),r(!1),g(null),s({year:"",title:"",description:""}),u()}catch(C){console.error(C),alert("Error al guardar")}},o=async t=>{if(window.confirm("¿Eliminar evento?"))try{await fetch(`${p.webTimeline}/${t}`,{method:"DELETE",credentials:"include"}),u()}catch(d){console.error(d)}},b=t=>{g(t),s({year:t.year,title:t.title,description:t.description}),r(!0)},N=()=>{g(null),s({year:"",title:"",description:""}),r(!0)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h3",{className:"text-xl text-white font-semibold",children:"Cronología (Timeline)"}),e.jsx(y,{variant:"primary",icon:U,onClick:N,children:"Añadir Evento"})]}),h?e.jsx("div",{className:"text-center text-white/60",children:"Cargando..."}):n.length===0?e.jsx("div",{className:"text-center text-white/40 p-8 border border-white/10 rounded-lg",children:"No hay eventos en la cronología."}):e.jsx("div",{className:"space-y-3",children:n.map(t=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 flex items-center justify-between hover:bg-white/10 transition-colors",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-400 font-bold text-lg block mb-1",children:t.year}),e.jsx("h4",{className:"text-white font-semibold",children:t.title}),e.jsx("p",{className:"text-white/60 text-sm mt-1 max-w-2xl",children:t.description})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>b(t),className:"p-2 bg-white/10 rounded hover:bg-white/20 text-white transition-colors",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(t.id),className:"p-2 bg-red-500/10 rounded hover:bg-red-500/20 text-red-400 transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]})]},t.id))}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("form",{onSubmit:j,className:"bg-slate-900 border border-white/20 p-6 rounded-xl w-full max-w-md shadow-2xl",children:[e.jsxs("h3",{className:"text-xl text-white font-bold mb-6",children:[m?"Editar":"Añadir"," Evento"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Año/Fecha *"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.year,onChange:t=>s({...l,year:t.target.value}),required:!0,placeholder:"Ej: 2023, Diciembre 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Título *"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.title,onChange:t=>s({...l,title:t.target.value}),required:!0,placeholder:"Título del hito"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Descripción *"}),e.jsx("textarea",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none min-h-[100px]",value:l.description,onChange:t=>s({...l,description:t.target.value}),required:!0,placeholder:"Descripción detallada..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-white/60 hover:text-white transition-colors",children:"Cancelar"}),e.jsx(y,{type:"submit",variant:"primary",children:"Guardar"})]})]})})]})},O=[{value:"leader",label:"Líder / Responsable"},{value:"member",label:"Miembro"},{value:"director",label:"Director / Profesor"}],q=[{value:"professors",label:"Profesores"},{value:"management",label:"Management"},{value:"structure_energy",label:"Estructura y Energía"},{value:"comms",label:"Comunicaciones"},{value:"ground_station",label:"Estación Terrena"},{value:"control_software",label:"Sistemas de Control y Software"},{value:"marketing",label:"Marketing"}],me=()=>{const[n,c]=i.useState([]),[h,x]=i.useState([]),[f,r]=i.useState(!0),[m,g]=i.useState(!1),[l,s]=i.useState(null),[u,j]=i.useState(!1),[o,b]=i.useState({name:"",role:"",title:"",image_url:"",linkedin_url:"",category:"member",department:"management",user_id:""}),N=async()=>{r(!0);try{const[a,k]=await Promise.all([fetch(`${p.webTeam}/all`,{credentials:"include"}),fetch(`${p.users}`,{credentials:"include"})]),v=await a.json();v.success&&c(v.data);const E=await k.json();E.success&&x(E.users)}catch(a){console.error(a)}finally{r(!1)}};i.useEffect(()=>{N()},[]);const t=async a=>{if(!a.target.files||a.target.files.length===0)return;const k=a.target.files[0],v=new FormData;v.append("file",k),j(!0);try{const E=await fetch(`${p.webTeam}/../../upload`,{}),$=await(await fetch("/api/upload",{method:"POST",body:v,credentials:"include"})).json();$.success?b(V=>({...V,image_url:$.url})):alert("Error uploading image")}catch(E){console.error(E),alert("Upload failed")}finally{j(!1)}},d=async a=>{a.preventDefault();const k=l?`${p.webTeam}/${l.id}`:p.webTeam,v=l?"PUT":"POST",E={...o,user_id:o.user_id?Number(o.user_id):null};try{await fetch(k,{method:v,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(E)}),g(!1),s(null),w(),N()}catch(A){console.error(A),alert("Error al guardar")}},w=()=>{b({name:"",role:"",title:"",image_url:"",linkedin_url:"",category:"member",department:"management",user_id:""})},C=async a=>{if(window.confirm("¿Eliminar miembro del equipo?"))try{await fetch(`${p.webTeam}/${a}`,{method:"DELETE",credentials:"include"}),N()}catch(k){console.error(k)}},M=a=>{s(a),b({name:a.name,role:a.role||"",title:a.title||"",image_url:a.image_url||"",linkedin_url:a.linkedin_url||"",category:a.category||"member",department:a.department||"management",user_id:a.user_id||""}),g(!0)},D=()=>{s(null),w(),g(!0)},J=a=>{var k;return((k=O.find(v=>v.value===a))==null?void 0:k.label)||a};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h3",{className:"text-xl text-white font-semibold",children:"Equipo"}),e.jsx(y,{variant:"primary",icon:U,onClick:D,children:"Añadir Miembro"})]}),f?e.jsx("div",{className:"text-center text-white/60",children:"Cargando..."}):n.length===0?e.jsx("div",{className:"text-center text-white/40 p-8 border border-white/10 rounded-lg",children:"No hay miembros en el equipo."}):e.jsx("div",{className:"space-y-8",children:q.map(a=>{const k=n.filter(v=>v.department===a.value);return k.length===0?null:e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-300 font-bold mb-4 text-lg border-b border-white/10 pb-2",children:a.label}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(v=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 flex items-start space-x-4 hover:bg-white/10 transition-colors relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 overflow-hidden flex-shrink-0",children:v.image_url?e.jsx("img",{src:v.image_url,alt:v.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-white/40",children:"Img"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"text-white font-bold truncate",children:v.name}),e.jsx("p",{className:"text-blue-400 text-xs mb-0.5 truncate",children:v.role}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${v.category==="leader"?"bg-yellow-500/20 text-yellow-300":"bg-white/10 text-white/50"}`,children:J(v.category)}),v.user_id&&e.jsx(S,{className:"w-3 h-3 text-green-400",title:"Usuario vinculado"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{onClick:()=>M(v),className:"p-1.5 bg-white/10 rounded hover:bg-white/20 text-white transition-colors",children:e.jsx(P,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>C(v.id),className:"p-1.5 bg-red-500/10 rounded hover:bg-red-500/20 text-red-400 transition-colors",children:e.jsx(T,{className:"w-3 h-3"})})]})]},v.id))})]},a.value)})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("form",{onSubmit:d,className:"bg-slate-900 border border-white/20 p-6 rounded-xl w-full max-w-md shadow-2xl overflow-y-auto max-h-[90vh]",children:[e.jsxs("h3",{className:"text-xl text-white font-bold mb-6",children:[l?"Editar":"Añadir"," Miembro"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Nombre *"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.name,onChange:a=>b({...o,name:a.target.value}),required:!0,placeholder:"Nombre Completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Rol / Cargo *"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.role,onChange:a=>b({...o,role:a.target.value}),required:!0,placeholder:"Ej: Ingeniero de Software"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Título Académico"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.title,onChange:a=>b({...o,title:a.target.value}),placeholder:"Ej: PhD, Estudiante de Máster..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Nivel Jerárquico"}),e.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.category,onChange:a=>b({...o,category:a.target.value}),children:O.map(a=>e.jsx("option",{value:a.value,className:"bg-slate-800",children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Departamento"}),e.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.department,onChange:a=>b({...o,department:a.target.value}),children:q.map(a=>e.jsx("option",{value:a.value,className:"bg-slate-800",children:a.label},a.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Imagen"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.image_url,onChange:a=>b({...o,image_url:a.target.value}),placeholder:"URL o Subir archivo..."}),e.jsxs("label",{className:"cursor-pointer bg-white/10 hover:bg-white/20 text-white p-2.5 rounded-lg border border-white/10 transition-colors",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:t})]})]}),u&&e.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Subiendo..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Usuario Vinculado"}),e.jsxs("select",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.user_id,onChange:a=>b({...o,user_id:a.target.value}),children:[e.jsx("option",{value:"",className:"bg-slate-800",children:"-- Sin vincular --"}),h.map(a=>e.jsxs("option",{value:a.id,className:"bg-slate-800",children:[a.username," (",a.nombre_completo,")"]},a.id))]}),e.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Vincular permite al usuario editar esta ficha."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"LinkedIn URL"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:o.linkedin_url,onChange:a=>b({...o,linkedin_url:a.target.value}),placeholder:"https://linkedin.com/in/..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-white/60 hover:text-white transition-colors",children:"Cancelar"}),e.jsx(y,{type:"submit",variant:"primary",disabled:u,children:"Guardar"})]})]})})]})},be=[{value:"Users",label:"Usuarios (Users)"},{value:"Lightbulb",label:"Bombilla (Idea)"},{value:"Link",label:"Enlace (Link)"},{value:"Rocket",label:"Cohete (Rocket)"},{value:"Star",label:"Estrella (Star)"}],pe=[{value:"from-blue-400 to-blue-600",label:"Azul"},{value:"from-green-400 to-green-600",label:"Verde"},{value:"from-purple-400 to-purple-600",label:"Morado"},{value:"from-orange-400 to-orange-600",label:"Naranja"},{value:"from-red-400 to-red-600",label:"Rojo"}],we=()=>{const[n,c]=i.useState([]),[h,x]=i.useState(!0),[f,r]=i.useState(!1),[m,g]=i.useState(null),[l,s]=i.useState({name:"",short_name:"",description:"",role:"",icon:"Users",color:"from-blue-400 to-blue-600",website:"",contribution:""}),u=async()=>{x(!0);try{const d=await(await fetch(`${p.webSponsors}/all`,{credentials:"include"})).json();d.success&&c(d.data)}catch(t){console.error(t)}finally{x(!1)}};i.useEffect(()=>{u()},[]);const j=async t=>{t.preventDefault();const d=m?`${p.webSponsors}/${m.id}`:p.webSponsors,w=m?"PUT":"POST";try{await fetch(d,{method:w,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}),r(!1),g(null),s({name:"",short_name:"",description:"",role:"",icon:"Users",color:"from-blue-400 to-blue-600",website:"",contribution:""}),u()}catch(C){console.error(C),alert("Error al guardar")}},o=async t=>{if(window.confirm("¿Eliminar patrocinador?"))try{await fetch(`${p.webSponsors}/${t}`,{method:"DELETE",credentials:"include"}),u()}catch(d){console.error(d)}},b=t=>{g(t),s({name:t.name,short_name:t.short_name||"",description:t.description||"",role:t.role||"",icon:t.icon||"Users",color:t.color||"from-blue-400 to-blue-600",website:t.website||"",contribution:t.contribution||""}),r(!0)},N=()=>{g(null),s({name:"",short_name:"",description:"",role:"",icon:"Users",color:"from-blue-400 to-blue-600",website:"",contribution:""}),r(!0)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h3",{className:"text-xl text-white font-semibold",children:"Patrocinadores / Colaboradores"}),e.jsx(y,{variant:"primary",icon:U,onClick:N,children:"Añadir Patrocinador"})]}),h?e.jsx("div",{className:"text-center text-white/60",children:"Cargando..."}):n.length===0?e.jsx("div",{className:"text-center text-white/40 p-8 border border-white/10 rounded-lg",children:"No hay patrocinadores."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(t=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 flex flex-col hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h5",{className:"text-white font-bold",children:t.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>b(t),className:"p-1.5 bg-white/10 rounded hover:bg-white/20 text-white transition-colors",children:e.jsx(P,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>o(t.id),className:"p-1.5 bg-red-500/10 rounded hover:bg-red-500/20 text-red-400 transition-colors",children:e.jsx(T,{className:"w-3 h-3"})})]})]}),e.jsx("p",{className:"text-blue-400 text-sm mb-2 font-medium",children:t.role}),e.jsx("p",{className:"text-white/70 text-sm mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-auto flex items-center justify-between text-xs text-white/50 border-t border-white/10 pt-2",children:[e.jsx("span",{children:t.contribution?"Con contribución":"Sin contribución"}),t.website&&e.jsx("a",{href:t.website,target:"_blank",className:"hover:text-white",children:e.jsx(re,{className:"w-3 h-3"})})]})]},t.id))}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("form",{onSubmit:j,className:"bg-slate-900 border border-white/20 p-6 rounded-xl w-full max-w-md shadow-2xl overflow-y-auto max-h-[90vh]",children:[e.jsxs("h3",{className:"text-xl text-white font-bold mb-6",children:[m?"Editar":"Añadir"," Patrocinador"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Nombre Completo *"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.name,onChange:t=>s({...l,name:t.target.value}),required:!0,placeholder:"Nombre del Patrocinador"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Nombre Corto (Opcional)"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.short_name,onChange:t=>s({...l,short_name:t.target.value}),placeholder:"Ej: ESA"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Rol / Tipo"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.role,onChange:t=>s({...l,role:t.target.value}),placeholder:"Ej: Colaborador Principal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Descripción"}),e.jsx("textarea",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none h-24 resize-none",value:l.description,onChange:t=>s({...l,description:t.target.value}),placeholder:"Descripción del patrocinador..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Contribución (Texto)"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.contribution,onChange:t=>s({...l,contribution:t.target.value}),placeholder:"Ej: Aportación económica"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Icono"}),e.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.icon,onChange:t=>s({...l,icon:t.target.value}),children:be.map(t=>e.jsx("option",{value:t.value,className:"bg-slate-800",children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Color"}),e.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.color,onChange:t=>s({...l,color:t.target.value}),children:pe.map(t=>e.jsx("option",{value:t.value,className:"bg-slate-800",children:t.label},t.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Sitio Web URL"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-2.5 text-white focus:border-blue-500 focus:outline-none",value:l.website,onChange:t=>s({...l,website:t.target.value}),placeholder:"https://..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-white/60 hover:text-white transition-colors",children:"Cancelar"}),e.jsx(y,{type:"submit",variant:"primary",children:"Guardar"})]})]})})]})},fe=()=>{const[n,c]=i.useState("partners");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-2 border-b border-white/10 pb-2 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>c("partners"),className:`px-4 py-2 rounded-t-lg flex items-center space-x-2 transition-colors whitespace-nowrap ${n==="partners"?"bg-white/10 text-white font-medium":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Aliados (Logos)"})]}),e.jsxs("button",{onClick:()=>c("sponsors"),className:`px-4 py-2 rounded-t-lg flex items-center space-x-2 transition-colors whitespace-nowrap ${n==="sponsors"?"bg-white/10 text-white font-medium":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Colaboradores (Detalle)"})]}),e.jsxs("button",{onClick:()=>c("timeline"),className:`px-4 py-2 rounded-t-lg flex items-center space-x-2 transition-colors whitespace-nowrap ${n==="timeline"?"bg-white/10 text-white font-medium":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"Cronología"})]}),e.jsxs("button",{onClick:()=>c("team"),className:`px-4 py-2 rounded-t-lg flex items-center space-x-2 transition-colors whitespace-nowrap ${n==="team"?"bg-white/10 text-white font-medium":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Equipo"})]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:[n==="partners"&&e.jsx(ue,{}),n==="sponsors"&&e.jsx(we,{}),n==="timeline"&&e.jsx(xe,{}),n==="team"&&e.jsx(me,{})]})]})},ge=({user:n})=>{const[c,h]=i.useState({current:"",new:"",confirm:""}),[x,f]=i.useState(null),[r,m]=i.useState(!0),[g,l]=i.useState(!1),[s,u]=i.useState({name:"",image_url:"",linkedin_url:"",github_url:"",email:""});i.useEffect(()=>{j()},[n.id]);const j=async()=>{try{const d=await(await fetch(`${p.webTeam}/all`,{credentials:"include"})).json();if(d.success){const w=d.data.find(C=>C.user_id===n.id);w&&(f(w),u({name:w.name,image_url:w.image_url||"",linkedin_url:w.linkedin_url||"",github_url:w.github_url||"",email:w.email||""}))}}catch(t){console.error(t)}finally{m(!1)}},o=async t=>{if(t.preventDefault(),c.new!==c.confirm){alert("Las contraseñas nuevas no coinciden");return}try{const w=await(await fetch(p.changePassword,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:c.current,new_password:c.new}),credentials:"include"})).json();w.success?(alert("Contraseña actualizada"),h({current:"",new:"",confirm:""})):alert(w.error||"Error al cambiar contraseña")}catch(d){console.error(d),alert("Error de red")}},b=async t=>{if(!t.target.files||t.target.files.length===0)return;const d=t.target.files[0],w=new FormData;w.append("file",d),l(!0);try{const M=await(await fetch("/api/upload",{method:"POST",body:w,credentials:"include"})).json();M.success?u(D=>({...D,image_url:M.url})):alert("Error uploading image")}catch(C){console.error(C),alert("Upload failed")}finally{l(!1)}},N=async t=>{if(t.preventDefault(),!!x)try{const w=await(await fetch(`${p.webTeam}/${x.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"})).json();w.success?(alert("Perfil público actualizado"),j()):alert(w.error||"Error al actualizar perfil")}catch(d){console.error(d),alert("Error de red")}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 p-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(S,{className:"w-6 h-6 mr-3 text-blue-400"}),"Mi Perfil de Usuario"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Nombre de Usuario"}),e.jsx("p",{className:"text-white font-medium text-lg mb-4",children:n.username}),e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Nombre Completo"}),e.jsx("p",{className:"text-white font-medium text-lg mb-4",children:n.nombre_completo}),e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Rol"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-500/20 text-blue-300 rounded-full text-xs font-bold uppercase",children:n.rol})]}),e.jsxs("form",{onSubmit:o,className:"bg-black/20 p-6 rounded-lg border border-white/5",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Cambiar Contraseña"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Contraseña Actual"}),e.jsx("input",{type:"password",required:!0,className:"w-full bg-black/40 border border-white/10 rounded p-2 text-white text-sm",value:c.current,onChange:t=>h({...c,current:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Nueva Contraseña"}),e.jsx("input",{type:"password",required:!0,className:"w-full bg-black/40 border border-white/10 rounded p-2 text-white text-sm",value:c.new,onChange:t=>h({...c,new:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Confirmar Nueva Contraseña"}),e.jsx("input",{type:"password",required:!0,className:"w-full bg-black/40 border border-white/10 rounded p-2 text-white text-sm",value:c.confirm,onChange:t=>h({...c,confirm:t.target.value})})]}),e.jsx(y,{type:"submit",variant:"primary",size:"sm",className:"w-full justify-center",children:"Actualizar Contraseña"})]})]})]})]}),r?e.jsx("div",{className:"text-center text-white/60",children:"Cargando perfil público..."}):x?e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(S,{className:"w-6 h-6 mr-3 text-green-400"}),"Mi Ficha Pública (Web)"]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("label",{className:"block text-white/70 text-sm mb-2 text-center",children:"Foto de Perfil"}),e.jsxs("div",{className:"w-40 h-40 bg-black/40 rounded-full overflow-hidden border-2 border-white/20 mx-auto relative group",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/30",children:"Sin foto"}),e.jsxs("label",{className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:[e.jsx(F,{className:"w-8 h-8 text-white"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:b})]})]}),g&&e.jsx("p",{className:"text-center text-blue-400 text-xs mt-2",children:"Subiendo..."})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Nombre Visible"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded p-2.5 text-white focus:border-blue-500 focus:outline-none",value:s.name,onChange:t=>u({...s,name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Email Público"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded p-2.5 text-white focus:border-blue-500 focus:outline-none",value:s.email,onChange:t=>u({...s,email:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"LinkedIn URL"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded p-2.5 text-white focus:border-blue-500 focus:outline-none",value:s.linkedin_url,onChange:t=>u({...s,linkedin_url:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"GitHub URL"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded p-2.5 text-white focus:border-blue-500 focus:outline-none",value:s.github_url,onChange:t=>u({...s,github_url:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Imagen URL (Alternativo)"}),e.jsx("input",{className:"w-full bg-black/40 border border-white/10 rounded p-2.5 text-white focus:border-blue-500 focus:outline-none",value:s.image_url,onChange:t=>u({...s,image_url:t.target.value})})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-white/10",children:e.jsx(y,{type:"submit",variant:"primary",icon:ee,children:"Guardar Cambios"})})]})]}):e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-8 text-center",children:[e.jsx("p",{className:"text-white/60",children:"Tu usuario no está vinculado a ninguna ficha pública del equipo."}),e.jsx("p",{className:"text-white/40 text-sm mt-2",children:"Contacta con un administrador si deberías aparecer en el organigrama."})]})]})},je=()=>{const[n,c]=i.useState(null),[h,x]=i.useState(!0),[f,r]=i.useState("profile");i.useEffect(()=>{m()},[]);const m=async()=>{try{const j=await fetch(p.verify,{credentials:"include"});if(j.ok){const o=await j.json();o.success&&o.user&&(c(o.user),o.user.rol==="admin"?r("users"):r("profile"))}}catch(j){console.error("Error al verificar sesión:",j)}finally{x(!1)}},g=j=>{c(j),j.rol==="admin"?r("users"):r("profile")},l=async()=>{try{await fetch(p.logout,{method:"POST",credentials:"include"}),c(null),window.location.href="/inventario"}catch(j){console.error(j)}};if(h)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"w-12 h-12 text-white/40 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Cargando panel..."})]})});if(!n)return e.jsx(te,{onLoginSuccess:g});const s=n.rol==="admin",u=n.rol==="manager"||s;return e.jsxs("div",{className:"min-h-screen bg-slate-900 flex text-white font-sans",children:[e.jsxs("div",{className:"w-64 bg-slate-950 border-r border-white/10 p-4 flex flex-col flex-shrink-0",children:[e.jsxs("div",{className:"mb-8 px-2 pt-2",children:[e.jsx("h1",{className:"text-xl font-bold text-white tracking-tight",children:"Panel de Control"}),e.jsx("p",{className:"text-xs text-white/40",children:"Gestión Málaga Space Team"})]}),e.jsxs("nav",{className:"space-y-1 flex-1",children:[e.jsxs("button",{onClick:()=>r("profile"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${f==="profile"?"bg-blue-600 text-white shadow-lg shadow-blue-900/50":"text-white/60 hover:bg-white/5 hover:text-white"}`,children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Mi Perfil"})]}),s&&e.jsxs("button",{onClick:()=>r("users"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${f==="users"?"bg-blue-600 text-white shadow-lg shadow-blue-900/50":"text-white/60 hover:bg-white/5 hover:text-white"}`,children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Usuarios"})]}),u&&e.jsxs("button",{onClick:()=>r("content"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${f==="content"?"bg-blue-600 text-white shadow-lg shadow-blue-900/50":"text-white/60 hover:bg-white/5 hover:text-white"}`,children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{children:"Contenido Web"})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsxs("div",{className:"px-4 py-2 mb-2",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:n.nombre_completo}),e.jsx("p",{className:"text-xs text-white/40 capitalize",children:n.rol})]}),e.jsxs("button",{onClick:l,className:"w-full flex items-center space-x-3 px-4 py-2 rounded-lg text-red-400 hover:bg-red-500/10 transition-colors",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[f==="profile"&&e.jsx(ge,{user:n}),f==="users"&&s&&e.jsx(he,{currentUser:n}),f==="content"&&u&&e.jsxs("div",{className:"p-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[e.jsx(R,{className:"w-8 h-8 mr-3 text-blue-400"}),"Gestión de Contenido"]}),e.jsx("p",{className:"text-white/60 mb-8 pl-11",children:"Edita las secciones públicas de la web (Partners, Cronología, Equipo)."}),e.jsx(fe,{})]})]})]})]})};K.createRoot(document.getElementById("root")).render(e.jsx(Q.StrictMode,{children:e.jsx(je,{})}));
